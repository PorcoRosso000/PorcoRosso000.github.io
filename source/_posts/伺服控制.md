---
title: 伺服控制
typora-root-url: 伺服控制
keywords: '伺服'
abbrlink: 44c71ac0
date: 2025-02-26 20:50:34
tags: 伺服
categories: 伺服
photos:
description: 伺服控制
---

伺服控制

<!--more-->

------

# 伺服接线

## 桢正伺服IO接线

电源11-P24V,9-N24V
抱闸3-P24V,16-BK+
限位10和17短接，8-正限位，7-负限位

![](桢正伺服引脚定义.png)

## 汇川伺服IO接线

pnp抱闸接线方法

13接N24V,10接正限位，9接负限位
抱闸5接P24V,4接继电器线圈

![](汇川伺服信号表.png)

汇川默认抱闸npn接线图

![](汇川伺服抱闸标准接线图.png)

## 减速比

### 伺服电机减速机速比的定义

伺服电机减速机速比(speed ratio)是指伺服电机与减速机之间的转速之比。具体来说，如果伺服电机的转速为n1，减速机输出轴的转速为n2，则速比I可以定义为I=n1/n2

### 伺服电机减速机速比的计算方法

伺服电机减速机速比的计算方法相对简单，只需将电机的转速除以减速机输出轴的转速即可得到。例如，如果伺服电机的转速为3000转/分钟，减速机输出轴的转速为50转/分钟，则伺服电机减速机速比为3000/50=60

## 螺距（Pitch）

指相邻两螺纹牙对应点之间的轴向距离（平行于螺纹轴线测量），通常用符号 **P** 表示，单位为毫米（mm）或英寸（inch）。

对于**单线螺纹**：螺距=导程（即螺纹旋转一周前进的距离）。

对于**多线螺纹**：导程=螺距×线数（如双线螺纹的导程为2P）。

## 如何计算电机的转速

如何计算电机转速，已知 伺服实际运动速度mm/s，减速比，还有螺距

```
实际运行速度/螺距 * 60 = 减速机的实际转速
减速机的实际转速 * 减速比 = 电机转速
```



# 伺服控制

## 伺服控制参数

```markdown
系统控制：
	根据系统的状态进行伺服的逻辑控制，如 自动中，手动中，停止中 等

软硬限位开关：
	调试阶段临时开启或者关闭软硬限位

硬件标识符：
	epos模式下标准报文的硬件标识符或者对应的工艺对象
	
电机额定转速：
	规定的电动机的额定转速
	
减速比：
	有减速机的情况下实际的减速比，没有减速比设置1
	
螺距：
	直线轴设置  螺距,分度圆周长,导程;
	旋转轴设置  360
	
定位精度：
	一般使用0.1
	
伺服控制参数：
	伺服使能、伺服回零完成等伺服参数
```

## EPOS控制

需要使用epos模块进行伺服控制

### 可控制设备数量

- **S7-1200**：通过 PROFINET IO 使用 EPOS 模式（FB284）控制 V90 PN 时，最多可以控制 16 个设备。
- **S7-1500**：不同型号的 S7-1500 CPU 支持的设备数量不同，例如 S7-1511-1PN 最多支持 96 个 PROFINET IO 设备，S7-1513-1PN 最多支持 128 个，S7-1515-2PN 最多支持 192 个。

## 工艺对象控制

需创建工艺对象

### 工艺对象驱动器

可以选用PTO脉冲的方式对轴进行控制

```markdown
   使用脉冲方式控制需要接必要的DI DO线
   DI:上限传感器  原点传感器  下限传感器  伺服完成信号
   伺服准备
   DO：脉冲 方向 伺服复位 使能
   		
   使用脉冲方向进行控制只能使用Q0.0等系统自动分配的点，自动分配的点有脉冲的功能，总共可以搞4个伺服
   使用PTO方式进行控制，编码器可以直接接在plc的i点上，正常是接在伺服驱动器上，接在plc上可以直接读取编码器信息，知道实时脉冲数，接在驱动器上plc和编码器之间没有交互，通过高速计数器进行脉冲的转换，高速计数器要在plc属性中随便选一个打开，高速计数器的工作模式要和编码器保持一致

   在使用PTO时要在plc属性中打开脉冲发生器
```

也可以选用PROFIdrive(总线)通信的方式进行控制

### 可控制设备数量

- **S7-1200**：不同型号的 CPU 支持的运动控制工艺对象数量不同。例如，1214C 最多支持 8 个轴（工艺对象），1215C/1217C 最多支持 16 个轴，通过扩展信号板或模块可进一步增加，但受限于 CPU 的处理能力和内存。
- **S7-1500**：支持的工艺对象数量更多，基础型号（如 1511-1PN）通常可支持 32 个运动控制轴，高端型号（如 1518-4PN/DP）可支持更多（如 128 个轴），具体取决于 CPU 的性能和配置的工艺包授权。
- **S7-1200/S7-1500 的温度控制工艺对象**：数量通常受限于 CPU 的模拟量输入 / 输出点数、扫描周期以及程序处理能力，一般可支持数十个温控回路。

## 常见运动控制模式

1. **位置控制模式（Position Control）**这是最常用的模式之一，通过指定工艺对象直接控制伺服轴的目标位置。可实现绝对位置、相对位置、点动（Jog）等运动控制，支持位置预设、连续路径规划等功能，适用于需要精确定位的场景（如机床加工、自动化装配）。
2. **速度控制模式（Speed Control）**工艺对象直接设定伺服轴的目标转速，伺服系统维持该速度运行，不直接控制最终位置。适用于对运行速度有严格要求，而位置精度要求不高的场景（如传送带、搅拌设备）。
3. **扭矩控制模式（Torque Control）**通过工艺对象设定伺服轴的输出扭矩，伺服系统以恒定扭矩运行，速度随负载变化而调整。适用于需要精确控制输出力的场景（如张力控制、材料缠绕）。
4. **同步控制模式（Synchronous Control）**以一个主轴（主轴可以是虚拟轴或物理轴）的运动为基准，控制从轴跟随主运动按比例或特定关系同步运行。包括电子齿轮同步、电子凸轮同步等，适用于需要多轴协同的场景（如印刷机、包装机）。
5. **回零模式（Homing Mode）**属于位置控制的辅助模式，通过工艺对象执行回参考点操作，建立轴的绝对位置基准。支持多种回零方式（如接近开关 + 编码器零位、编码器零位单独回零等）。

## 常见伺服控制方式

1. **PROFINET 通信控制**
   这是工业自动化中最常用的方式之一。通过 PROFINET 总线，PLC 的工艺对象可以直接向伺服驱动器发送控制指令（位置、速度、扭矩等），并实时接收驱动器状态（位置反馈、报警信息等）。这种方式无需脉冲线，减少了布线，支持更高精度的同步控制和更多参数的交互，适用于多轴协同场景（如 S7-1200/1500 搭配 V90 PN 伺服）。
2. **PROFIBUS-DP 通信控制**
   基于 PROFIBUS-DP 现场总线，PLC 通过工艺对象与伺服驱动器建立通信，实现类似 PROFINET 的控制功能。虽然传输速率和灵活性略低于 PROFINET，但在传统工业环境中仍广泛应用（如搭配 V90 DP 伺服驱动器）。
3. **模拟量控制**
   工艺对象可通过 PLC 的模拟量输出模块（如 4-20mA 或 ±10V 信号）向伺服驱动器发送控制指令，用于速度或扭矩模式的调节。同时通过模拟量输入接收驱动器的反馈信号（如实际速度）。这种方式结构简单，但精度受模拟量信号干扰影响较大，适用于对控制精度要求不高的场景。
4. **数字量组合控制**
   除了脉冲 + 方向，还可通过多组数字量信号实现控制，例如：
   - 方向信号 + 速度档位信号（通过不同数字量组合选择预设速度）；
   - 启动 / 停止、正反转、急停等数字量信号配合模拟量或通信方式，实现复合控制。
5. **专用运动控制协议**
   部分高端伺服系统支持特定的运动控制协议，如西门子的 DRIVE-CLiQ（用于 S120 伺服系统与 PLC 的高速通信），工艺对象可通过这类协议实现高精度的实时控制和诊断功能。
6. **脉冲控制模式**
   传统的脉冲 + 方向控制

实际应用中，通信方式（如 PROFINET）已逐渐替代传统脉冲控制，成为主流选择，尤其在需要多轴同步、参数交互复杂或布线简化的场景中更具优势。



## 电容性负载，感性负载，阻性负载

当频繁动作频繁通断电时，比如自动机械设备，直流并联续流二极管，交流并联RC浪涌保护器



对于交流电容性负载，开关导通的瞬间，相当于电流一马当先，冲锋陷阵；断开的一瞬间，电流全身而退，电压坚守阵地。

led灯，开关电源



感性负载刚好相反，接通的瞬间，线圈磁场会阻碍电流，让电流滞后于电压，需要电容进行补偿，叫无功补偿

电机，变压器，电磁阀，带线圈的负载



阻性负载，断开的一瞬间电流也直接归零

电阻丝，加热棒，老式灯泡



RLY   的plc属于继电器类型的plc，只能输出低频率的脉冲，频率高了会损坏，上限大概是1000hz

DC 的plc属于晶体管类型的plc，可以输出高频率的脉冲，频率是100khz



## 编码器

### 绝对式编码器

机械绝对，不会丢原点

电子绝对，电池没电会丢原点

### 增量式编码器

断电立马会丢原点





## PID参数调节

定义

<img src="PID定义.png" style="zoom:75%;" />



<img src="PID定义1.png" style="zoom:75%;" />

案例

<img src="PID案例1.png" style="zoom:75%;" />

<img src="PID案例2.png" style="zoom:75%;" />

<img src="PID案例3.png" style="zoom:75%;" />

<img src="PID案例4.png" style="zoom:75%;" />

案例总结

<img src="PID总结.png" style="zoom:75%;" />

PID调整口诀

<img src="/pid参数调整.jpg" style="zoom:25%;" />
